Calling from URL A to B:
- https://tokenhandler.authsamples-dev.com/api/companies
- https://api.authsamples.com/api/companies

[ERR_TLS_CERT_ALTNAME_INVALID]: Hostname/IP does not match certificate's altnames: Host: tokenhandler.authsamples-dev.com. is not in the cert's altnames: DNS:*.execute-api.eu-west-2.amazonaws.com
    at new NodeError (internal/errors.js:322:7)
    at Object.checkServerIdentity (tls.js:347:12)
    at TLSSocket.onConnectSecure (_tls_wrap.js:1525:27)
    at TLSSocket.emit (events.js:400:28)
    at TLSSocket._finishInit (_tls_wrap.js:937:8)
    at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:709:12) {
  reason: "Host: tokenhandler.authsamples-dev.com. is not in the cert's altnames: DNS:*.execute-api.eu-west-2.amazonaws.com",
  host: 'tokenhandler.authsamples-dev.com',
  cert: {
    subject: [Object: null prototype] {
      CN: '*.execute-api.eu-west-2.amazonaws.com'
    },
    issuer: [Object: null prototype] {
      C: 'US',
      O: 'Amazon',
      OU: 'Server CA 1B',
      CN: 'Amazon'
    },
    subjectaltname: 'DNS:*.execute-api.eu-west-2.amazonaws.com',
    infoAccess: [Object: null prototype] {
      'OCSP - URI': [Array],
      'CA Issuers - URI': [Array]
    },
    modulus: 'E06668C1F0CA784AD414CBE4B51666133B3E958F1FE0D8F537E3EAB9F737B3B96CF25B04FDC9BE13E3258A6AA30DAC5B9469F79700A072D05B77F7D979FE450EB5BA774CB62728E6703AD7F70436E0FC2F7D9CF3D294BED3E475AE628B1F4B9B8FE0E6E3482DF715BF84074EA8464148E7EBEC1235FBF191EC64750D74319F61C5D379A7D7BB05691AA14C41B85F28FC116836E1AEE524444D268C2023130FD95AEE7785A44D30E1B62B67CF8913F5715E9A8AF4BD88C80FEFFF9C0827FAE2F4A0B1B1EDF5F358C046A3A42F706E5808A79979B80F95C91D0CBB06C5ECB5710FDC6E7F4F01A420C5D14C97F0E151985BCBD3112D0BA9BE0A50BAC81E2BB9844F',
    bits: 2048,
    exponent: '0x10001',
    pubkey: <Buffer 30 82 01 22 30 0d 06 09 2a 86 48 86 f7 0d 01 01 01 05 00 03 82 01 0f 00 30 82 01 0a 02 82 01 01 00 e0 66 68 c1 f0 ca 78 4a d4 14 cb e4 b5 16 66 13 3b ... 244 more bytes>,
    valid_from: 'Aug  1 00:00:00 2021 GMT',
    valid_to: 'Aug 30 23:59:59 2022 GMT',
    fingerprint: '19:76:C9:24:16:3D:B2:59:12:0B:F3:D4:BA:B0:A0:C3:A4:CB:8D:D2',
    fingerprint256: '94:DE:C7:1D:00:07:7F:F9:B1:48:2D:45:43:66:7F:06:CE:67:14:5F:94:47:B0:B2:99:08:25:EE:FB:AD:4A:73',
    ext_key_usage: [ '1.3.6.1.5.5.7.3.1', '1.3.6.1.5.5.7.3.2' ],
    serialNumber: '03BEAAD6D58602FF1C3E1ADDCB6336FA',
    raw: <Buffer 30 82 05 ff 30 82 04 e7 a0 03 02 01 02 02 10 03 be aa d6 d5 86 02 ff 1c 3e 1a dd cb 63 36 fa 30 0d 06 09 2a 86 48 86 f7 0d 01 01 0b 05 00 30 46 31 0b ... 1489 more bytes>,
    issuerCertificate: {
      subject: [Object: null prototype],
      issuer: [Object: null prototype],
      infoAccess: [Object: null prototype],
      modulus: 'C24E1667DDCEBC6AC8375AEC3A30B01DE6D112E8122848CCE829C1B96E53D5A3EB03391ACC7787F601B9D970CCCF6B8DE3E3037186996DCBA6942A4E13D6A7BD04EC0A163C0AEB39B1C4B558A3B6C75625EC3E527AA8E3291607B96E50CFFB5F31F81DBA034A628903AE3E47F20F2791E3142085F8FAE98A35F55F9E994DE76B37EFA4503E44ECFA5A8566079C7E176A55F3178A351EEEE9ACC3754E58557D536B0A6B9B1442D7E5AC0189B3EAA3FECFC02B0C84C2D85315CB67F0D088CA3AD11773F55F9AD4C5721E7E01F19830632AAAF27A2DC5E2021A86E5323E0EBD11B4CF3C93EF1750109E43C2062AE00D68BED3888B4A658C4AD4C32E4C9B55F486E5',
      bits: 2048,
      exponent: '0x10001',
      pubkey: <Buffer 30 82 01 22 30 0d 06 09 2a 86 48 86 f7 0d 01 01 01 05 00 03 82 01 0f 00 30 82 01 0a 02 82 01 01 00 c2 4e 16 67 dd ce bc 6a c8 37 5a ec 3a 30 b0 1d e6 ... 244 more bytes>,
      valid_from: 'Oct 22 00:00:00 2015 GMT',
      valid_to: 'Oct 19 00:00:00 2025 GMT',
      fingerprint: '91:7E:73:2D:33:0F:9A:12:40:4F:73:D8:BE:A3:69:48:B9:29:DF:FC',
      fingerprint256: 'F5:5F:9F:FC:B8:3C:73:45:32:61:60:1C:7E:04:4D:B1:5A:0F:03:4B:93:C0:58:30:F2:86:35:EF:88:9C:F6:70',
      serialNumber: '067F94578587E8AC77DEB253325BBC998B560D',
      raw: <Buffer 30 82 04 49 30 82 03 31 a0 03 02 01 02 02 13 06 7f 94 57 85 87 e8 ac 77 de b2 53 32 5b bc 99 8b 56 0d 30 0d 06 09 2a 86 48 86 f7 0d 01 01 0b 05 00 30 ... 1051 more bytes>,
      issuerCertificate: [Object]
    }
  },
  code: 'ERR_TLS_CERT_ALTNAME_INVALID',
  config: {
    transitional: {
      silentJSONParsing: true,
      forcedJSONParsing: true,
      clarifyTimeoutError: false
    },
    adapter: [Function: httpAdapter],
    transformRequest: [ [Function: transformRequest] ],
    transformResponse: [ [Function: transformResponse] ],
    timeout: 0,
    xsrfCookieName: 'XSRF-TOKEN',
    xsrfHeaderName: 'X-XSRF-TOKEN',
    maxContentLength: -1,
    maxBodyLength: -1,
    validateStatus: [Function: validateStatus],
    headers: {
      Accept: '*/*',
      Host: 'tokenhandler.authsamples-dev.com',
      'User-Agent': 'curl/7.64.1',
      'X-Amzn-Trace-Id': 'Root=1-6224b56c-6054f1b3298e847e4f322e7f',
      'X-Forwarded-For': '2.25.55.127',
      'X-Forwarded-Port': '443',
      'X-Forwarded-Proto': 'https'
    },
    url: 'https://d-3t0owfbcek.execute-api.eu-west-2.amazonaws.com/api/companies',
    method: 'get',
    data: undefined
  },
  request: <ref *1> Writable {
    _writableState: WritableState {
      objectMode: false,
      highWaterMark: 16384,
      finalCalled: false,
      needDrain: false,
      ending: false,
      ended: false,
      finished: false,
      destroyed: false,
      decodeStrings: true,
      defaultEncoding: 'utf8',
      length: 0,
      writing: false,
      corked: 0,
      sync: true,
      bufferProcessing: false,
      onwrite: [Function: bound onwrite],
      writecb: null,
      writelen: 0,
      afterWriteTickInfo: null,
      buffered: [],
      bufferedIndex: 0,
      allBuffers: true,
      allNoop: true,
      pendingcb: 0,
      prefinished: false,
      errorEmitted: false,
      emitClose: true,
      autoDestroy: true,
      errored: null,
      closed: false
    },
    _events: [Object: null prototype] {
      response: [Function: handleResponse],
      error: [Function: handleRequestError],
      socket: [Function: handleRequestSocket]
    },
    _eventsCount: 3,
    _maxListeners: undefined,
    _options: {
      maxRedirects: 21,
      maxBodyLength: 10485760,
      protocol: 'https:',
      path: '/api/companies',
      method: 'GET',
      headers: [Object],
      agent: undefined,
      agents: [Object],
      auth: undefined,
      hostname: 'd-3t0owfbcek.execute-api.eu-west-2.amazonaws.com',
      port: null,
      nativeProtocols: [Object],
      pathname: '/api/companies'
    },
    _ended: true,
    _ending: true,
    _redirectCount: 0,
    _redirects: [],
    _requestBodyLength: 0,
    _requestBodyBuffers: [],
    _onNativeResponse: [Function (anonymous)],
    _currentRequest: ClientRequest {
      _events: [Object: null prototype],
      _eventsCount: 7,
      _maxListeners: undefined,
      outputData: [],
      outputSize: 0,
      writable: true,
      destroyed: false,
      _last: true,
      chunkedEncoding: false,
      shouldKeepAlive: false,
      _defaultKeepAlive: true,
      useChunkedEncodingByDefault: false,
      sendDate: false,
      _removedConnection: false,
      _removedContLen: false,
      _removedTE: false,
      _contentLength: 0,
      _hasBody: true,
      _trailer: '',
      finished: true,
      _headerSent: true,
      socket: [TLSSocket],
      _header: 'GET /api/companies HTTP/1.1\r\n' +
        'Accept: */*\r\n' +
        'Host: tokenhandler.authsamples-dev.com\r\n' +
        'User-Agent: curl/7.64.1\r\n' +
        'X-Amzn-Trace-Id: Root=1-6224b56c-6054f1b3298e847e4f322e7f\r\n' +
        'X-Forwarded-For: 2.25.55.127\r\n' +
        'X-Forwarded-Port: 443\r\n' +
        'X-Forwarded-Proto: https\r\n' +
        'Connection: close\r\n' +
        '\r\n',
      _keepAliveTimeout: 0,
      _onPendingData: [Function: noopPendingOutput],
      agent: [Agent],
      socketPath: undefined,
      method: 'GET',
      maxHeaderSize: undefined,
      insecureHTTPParser: undefined,
      path: '/api/companies',
      _ended: false,
      res: null,
      aborted: false,
      timeoutCb: null,
      upgradeOrConnect: false,
      parser: null,
      maxHeadersCount: null,
      reusedSocket: false,
      host: 'd-3t0owfbcek.execute-api.eu-west-2.amazonaws.com',
      protocol: 'https:',
      _redirectable: [Circular *1],
      [Symbol(kCapture)]: false,
      [Symbol(kNeedDrain)]: false,
      [Symbol(corked)]: 0,
      [Symbol(kOutHeaders)]: [Object: null prototype]
    },
    _currentUrl: 'https://d-3t0owfbcek.execute-api.eu-west-2.amazonaws.com/api/companies',
    [Symbol(kCapture)]: false
  },
  response: undefined,
  isAxiosError: true,
  toJSON: [Function: toJSON]
}
2022-03-06T13:21:48.504Z e0a9d9b1-bcfd-449f-b771-eba9e30b2fb1 ERROR Error [ERR_TLS_CERT_ALTNAME_INVALID]: Hostname/IP does not match certificate's altnames: Host: tokenhandler.authsamples-dev.com. is not in the cert's altnames: DNS:*.execute-api.eu-west-2.amazonaws.com at new NodeError (internal/errors.js:322:7) at Object.checkServerIdentity (tls.js:347:12) at TLSSocket.onConnectSecure (_tls_wrap.js:1525:27) at TLSSocket.emit (events.js:400:28) at TLSSocket._finishInit (_tls_wrap.js:937:8) at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:709:12) { reason: "Host: tokenhandler.authsamples-dev.com. is not in the cert's altnames: DNS:*.execute-api.eu-west-2.amazonaws.com", host: 'tokenhandler.authsamples-dev.com', cert: { subject: [Object: null prototype] { CN: '*.execute-api.eu-west-2.amazonaws.com' }, issuer: [Object: null prototype] { C: 'US', O: 'Amazon', OU: 'Server CA 1B', CN: 'Amazon' }, subjectaltname: 'DNS:*.execute-api.eu-west-2.amazonaws.com', infoAccess: [Object: null prototype] { 'OCSP - URI': [Array], 'CA Issuers - URI': [Array] }, modulus: 'E06668C1F0CA784AD414CBE4B51666133B3E958F1FE0D8F537E3EAB9F737B3B96CF25B04FDC9BE13E3258A6AA30DAC5B9469F79700A072D05B77F7D979FE450EB5BA774CB62728E6703AD7F70436E0FC2F7D9CF3D294BED3E475AE628B1F4B9B8FE0E6E3482DF715BF84074EA8464148E7EBEC1235FBF191EC64750D74319F61C5D379A7D7BB05691AA14C41B85F28FC116836E1AEE524444D268C2023130FD95AEE7785A44D30E1B62B67CF8913F5715E9A8AF4BD88C80FEFFF9C0827FAE2F4A0B1B1EDF5F358C046A3A42F706E5808A79979B80F95C91D0CBB06C5ECB5710FDC6E7F4F01A420C5D14C97F0E151985BCBD3112D0BA9BE0A50BAC81E2BB9844F', bits: 2048, exponent: '0x10001', pubkey: <Buffer 30 82 01 22 30 0d 06 09 2a 86 48 86 f7 0d 01 01 01 05 00 03 82 01 0f 00 30 82 01 0a 02 82 01 01 00 e0 66 68 c1 f0 ca 78 4a d4 14 cb e4 b5 16 66 13 3b ... 244 more bytes>, valid_from: 'Aug 1 00:00:00 2021 GMT', valid_to: 'Aug 30 23:59:59 2022 GMT', fingerprint: '19:76:C9:24:16:3D:B2:59:12:0B:F3:D4:BA:B0:A0:C3:A4:CB:8D:D2', fingerprint256: '94:DE:C7:1D:00:07:7F:F9:B1:48:2D:45:43:66:7F:06:CE:67:14:5F:94:47:B0:B2:99:08:25:EE:FB:AD:4A:73', ext_key_usage: [ '1.3.6.1.5.5.7.3.1', '1.3.6.1.5.5.7.3.2' ], serialNumber: '03BEAAD6D58602FF1C3E1ADDCB6336FA', raw: <Buffer 30 82 05 ff 30 82 04 e7 a0 03 02 01 02 02 10 03 be aa d6 d5 86 02 ff 1c 3e 1a dd cb 63 36 fa 30 0d 06 09 2a 86 48 86 f7 0d 01 01 0b 05 00 30 46 31 0b ... 1489 more bytes>, issuerCertificate: { subject: [Object: null prototype], issuer: [Object: null prototype], infoAccess: [Object: null prototype], modulus: 'C24E1667DDCEBC6AC8375AEC3A30B01DE6D112E8122848CCE829C1B96E53D5A3EB03391ACC7787F601B9D970CCCF6B8DE3E3037186996DCBA6942A4E13D6A7BD04EC0A163C0AEB39B1C4B558A3B6C75625EC3E527AA8E3291607B96E50CFFB5F31F81DBA034A628903AE3E47F20F2791E3142085F8FAE98A35F55F9E994DE76B37EFA4503E44ECFA5A8566079C7E176A55F3178A351EEEE9ACC3754E58557D536B0A6B9B1442D7E5AC0189B3EAA3FECFC02B0C84C2D85315CB67F0D088CA3AD11773F55F9AD4C5721E7E01F19830632AAAF27A2DC5E2021A86E5323E0EBD11B4CF3C93EF1750109E43C2062AE00D68BED3888B4A658C4AD4C32E4C9B55F486E5', bits: 2048, exponent: '0x10001', pubkey: <Buffer 30 82 01 22 30 0d 06 09 2a 86 48 86 f7 0d 01 01 01 05 00 03 82 01 0f 00 30 82 01 0a 02 82 01 01 00 c2 4e 16 67 dd ce bc 6a c8 37 5a ec 3a 30 b0 1d e6 ... 244 more bytes>, valid_from: 'Oct 22 00:00:00 2015 GMT', valid_to: 'Oct 19 00:00:00 2025 GMT', fingerprint: '91:7E:73:2D:33:0F:9A:12:40:4F:73:D8:BE:A3:69:48:B9:29:DF:FC', fingerprint256: 'F5:5F:9F:FC:B8:3C:73:45:32:61:60:1C:7E:04:4D:B1:5A:0F:03:4B:93:C0:58:30:F2:86:35:EF:88:9C:F6:70', serialNumber: '067F94578587E8AC77DEB253325BBC998B560D', raw: <Buffer 30 82 04 49 30 82 03 31 a0 03 02 01 02 02 13 06 7f 94 57 85 87 e8 ac 77 de b2 53 32 5b bc 99 8b 56 0d 30 0d 06 09 2a 86 48 86 f7 0d 01 01 0b 05 00 30 ... 1051 more bytes>, issuerCertificate: [Object] } }, code: 'ERR_TLS_CERT_ALTNAME_INVALID', config: { transitional: { silentJSONParsing: true, forcedJSONParsing: true, clarifyTimeoutError: false }, adapter: [Function: httpAdapter], transformRequest: [ [Function: transformRequest] ], transformResponse: [ [Function: transformResponse] ], timeout: 0, xsrfCookieName: 'XSRF-TOKEN', xsrfHeaderName: 'X-XSRF-TOKEN', maxContentLength: -1, maxBodyLength: -1, validateStatus: [Function: validateStatus], headers: { Accept: '*/*', Host: 'tokenhandler.authsamples-dev.com', 'User-Agent': 'curl/7.64.1', 'X-Amzn-Trace-Id': 'Root=1-6224b56c-6054f1b3298e847e4f322e7f', 'X-Forwarded-For': '2.25.55.127', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https' }, url: 'https://d-3t0owfbcek.execute-api.eu-west-2.amazonaws.com/api/companies', method: 'get', data: undefined }, request: <ref *1> Writable { _writableState: WritableState { objectMode: false, highWaterMark: 16384, finalCalled: false, needDrain: false, ending: false, ended: false, finished: false, destroyed: false, decodeStrings: true, defaultEncoding: 'utf8', length: 0, writing: false, corked: 0, sync: true, bufferProcessing: false, onwrite: [Function: bound onwrite], writecb: null, writelen: 0, afterWriteTickInfo: null, buffered: [], bufferedIndex: 0, allBuffers: true, allNoop: true, pendingcb: 0, prefinished: false, errorEmitted: false, emitClose: true, autoDestroy: true, errored: null, closed: false }, _events: [Object: null prototype] { response: [Function: handleResponse], error: [Function: handleRequestError], socket: [Function: handleRequestSocket] }, _eventsCount: 3, _maxListeners: undefined, _options: { maxRedirects: 21, maxBodyLength: 10485760, protocol: 'https:', path: '/api/companies', method: 'GET', headers: [Object], agent: undefined, agents: [Object], auth: undefined, hostname: 'd-3t0owfbcek.execute-api.eu-west-2.amazonaws.com', port: null, nativeProtocols: [Object], pathname: '/api/companies' }, _ended: true, _ending: true, _redirectCount: 0, _redirects: [], _requestBodyLength: 0, _requestBodyBuffers: [], _onNativeResponse: [Function (anonymous)], _currentRequest: ClientRequest { _events: [Object: null prototype], _eventsCount: 7, _maxListeners: undefined, outputData: [], outputSize: 0, writable: true, destroyed: false, _last: true, chunkedEncoding: false, shouldKeepAlive: false, _defaultKeepAlive: true, useChunkedEncodingByDefault: false, sendDate: false, _removedConnection: false, _removedContLen: false, _removedTE: false, _contentLength: 0, _hasBody: true, _trailer: '', finished: true, _headerSent: true, socket: [TLSSocket], _header: 'GET /api/companies HTTP/1.1\r\n' + 'Accept: */*\r\n' + 'Host: tokenhandler.authsamples-dev.com\r\n' + 'User-Agent: curl/7.64.1\r\n' + 'X-Amzn-Trace-Id: Root=1-6224b56c-6054f1b3298e847e4f322e7f\r\n' + 'X-Forwarded-For: 2.25.55.127\r\n' + 'X-Forwarded-Port: 443\r\n' + 'X-Forwarded-Proto: https\r\n' + 'Connection: close\r\n' + '\r\n', _keepAliveTimeout: 0, _onPendingData: [Function: noopPendingOutput], agent: [Agent], socketPath: undefined, method: 'GET', maxHeaderSize: undefined, insecureHTTPParser: undefined, path: '/api/companies', _ended: false, res: null, aborted: false, timeoutCb: null, upgradeOrConnect: false, parser: null, maxHeadersCount: null, reusedSocket: false, host: 'd-3t0owfbcek.execute-api.eu-west-2.amazonaws.com', protocol: 'https:', _redirectable: [Circular *1], [Symbol(kCapture)]: false, [Symbol(kNeedDrain)]: false, [Symbol(corked)]: 0, [Symbol(kOutHeaders)]: [Object: null prototype] }, _currentUrl: 'https://d-3t0owfbcek.execute-api.eu-west-2.amazonaws.com/api/companies', [Symbol(kCapture)]: false }, response: undefined, isAxiosError: true, toJSON: [Function: toJSON] }